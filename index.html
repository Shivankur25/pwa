<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta
          name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
  />
  <title>EMI Calculator App & Loan</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
          href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
          rel="stylesheet"
  >
  <!-- Your styles & PWA manifest -->
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
<!-- 1) EARLY BROWSER + FEATURE DETECTION -->
<script>
  (function() {
    const isChrome =
            /Chrome/.test(navigator.userAgent) &&
            /Google Inc/.test(navigator.vendor);
    const supportsSW = 'serviceWorker' in navigator;
    const supportsPush = 'PushManager' in window;
    const supportsNotif = 'Notification' in window;

    if (isChrome && supportsSW && supportsPush && supportsNotif) {
      document.documentElement.classList.add('show-app');
    } else {
      document.documentElement.classList.add('show-unsupported');
    }
  })();
</script>

<!-- 2) UNSUPPORTED BROWSER FALLBACK -->
<div id="unsupported" style="display:none; padding:2rem; text-align:center;">
  <h1>Browser Not Supported</h1>
  <p>This application requires Google Chrome (or Chromium‑based) with PWA &amp; Notifications support.</p>
  <a
          href="https://www.google.com/chrome/"
          target="_blank"
          rel="noopener"
          style="
        display:inline-block;
        margin-top:1rem;
        padding:0.75rem 1.5rem;
        background:#0B57CF;
        color:#fff;
        border-radius:4px;
        text-decoration:none;
      "
  >
    Download Chrome
  </a>
</div>

<!-- 3) YOUR APP CONTENT -->
<div id="app-content" style="display:none;">
  <div class="app-container" id="fullscreen">
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="top-bar-content">
        <div class="top-bar-left">
          <img src="https://i1.wp.com/9to5google.com/wp-content/uploads/sites/4/2022/07/current-google-play-icon.jpg?ssl=1"
               alt="Play Store" class="play-store-logo">
          <div class="separator"></div>
          <span class="category">Google Play</span>
        </div>
        <div class="top-bar-right">
          <button class="icon-button"><i data-lucide="share-2"></i></button>
          <button class="icon-button"><i data-lucide="info"></i></button>
        </div>
      </div>
    </div>

    <div class="main-content">
      <!-- App Header -->
      <div class="app-header">
        <div class="app-icon-wrapper">
          <div class="app-icon">
            <div class="spinner" id="spinner">
              <img src="https://sdkdata.printrash.com/meetis_net_images/logo1.png" alt="App Icon" id="app-logo">
            </div>
          </div>
          <div class="app-title">
            <h1>EMI Calculator App & Loan</h1>
            <a class="app-id">LOAN Tech</a>
            <p id="progress" class="fs12"></p>
            <p class="fs12">Contains ads • In-app purchases</p>
          </div>
        </div>

        <div class="app-info">
          <div class="app-stats">
            <div class="swiper mySwiper1">
              <div class="swiper-wrapper h-content">
                <div class="swiper-slide">
                  <img src="https://sdkdata.printrash.com/meetis_net_images/revviews.png"
                       alt="review" class="img-fluid w-70">
                </div>
                <div class="swiper-slide">
                  <img src="https://sdkdata.printrash.com/meetis_net_images/23mb.png"
                       alt="size" class="img-fluid w-30">
                </div>
                <div class="swiper-slide">
                  <img src="https://sdkdata.printrash.com/meetis_net_images/rated.png"
                       alt="rating" class="img-fluid w-55">
                </div>
                <div class="swiper-slide">
                  <img src="https://sdkdata.printrash.com/meetis_net_images/5m.png"
                       alt="installs" class="img-fluid w-55">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Install / Open Buttons -->
      <div class="install-button-wrapper" id="install" style="display:none;">
        <button class="install-button" id="installBtn">
          <span id="installText">Install</span>
        </button>
      </div>
      <div class="install-button-wrapper" id="uninstall" style="display:none;">
        <a class="install-button" href="https://shivankur25.github.io/pwa/start"
           target="_blank" style="text-decoration:none">Open</a>
      </div>

      <!-- Screenshots swiper -->
      <div class="swiper mySwiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <img src="https://sdkdata.printrash.com/meetis_net_images/screenshot1.jpg" alt="Screenshot 1">
          </div>
          <div class="swiper-slide">
            <img src="https://sdkdata.printrash.com/meetis_net_images/screenshot2.jpg" alt="Screenshot 2">
          </div>
          <div class="swiper-slide">
            <img src="https://sdkdata.printrash.com/meetis_net_images/screenshot3.jpg" alt="Screenshot 3">
          </div>
          <div class="swiper-slide">
            <img src="https://sdkdata.printrash.com/meetis_net_images/screenshot4.jpg" alt="Screenshot 4">
          </div>
        </div>
      </div>

      <!-- About this app -->
      <div class="about-section">
        <h2 class="section-title">
          <span>About this app</span>
          <i class="fa-solid fa-arrow-right fa-sm"></i>
        </h2>
        <div class="about-card">
          <p class="about-description m-0">
            EMI Calculator Loan App : Easy calculations for Home, Car, Bike & Personal Loans
          </p>
          <div class="description__label" id="description-label">
            <div class="description__label-item">Finance</div>
            <div class="description__label-item">Tools</div>
            <div class="description__label-item">Calculators</div>
          </div>
        </div>
      </div>

      <!-- Data Safety -->
      <div class="about-section">
        <h2 class="section-title">
          <span>Data Safety</span>
          <i class="fa-solid fa-arrow-right fa-sm"></i>
        </h2>
        <div class="about-card">
          <p class="about-description">
            Safety starts with understanding how developers collect and share your data. Data privacy and
            security practices may vary based on your use, region, and age. The developer provided this
            information and may update it over time.
          </p>
        </div>
      </div>
      <div class="data-safety">
        <div class="data-text-box">
          <img src="https://sdkdata.printrash.com/meetis_net_images/share.png" alt="share" class="img-fluid w-16">
          <span>This App Shares These data types with third parties</span>
        </div>
        <div class="data-text-box">
          <img src="https://sdkdata.printrash.com/meetis_net_images/upload.png" alt="collect" class="img-fluid w-16">
          <span>This app may collect these data types</span>
        </div>
        <div class="data-text-box">
          <img src="https://sdkdata.printrash.com/meetis_net_images/lock.png" alt="encrypt" class="img-fluid w-16">
          <span>Data is encrypted in transit</span>
        </div>
        <div class="data-text-box">
          <img src="https://sdkdata.printrash.com/meetis_net_images/minus.png" alt="delete" class="img-fluid w-16">
          <span>You can request that data be deleted</span>
        </div>
        <div style="color:#0B57CF;font-size:14px;">See details</div>
      </div>

      <!-- Rating & Reviews -->
      <h2 class="section-title" style="margin-top:30px;">
        Rating And Review
        <i data-lucide="move-right" style="color: #3D3C3C;"></i>
      </h2>
      <div class="comments__tips">
        Ratings and reviews are verified and from people who use the same type of device that you use
      </div>
      <div class="review">
        <div class="global">
          <span class="global-value">0.0</span>
          <div class="rating-icons">
              <span class="one">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                <i class="fas fa-star"></i><i class="fas fa-star"></i>
              </span>
            <span class="two">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                <i class="fas fa-star"></i><i class="fas fa-star"></i>
              </span>
          </div>
          <span class="total-reviews">0</span>
        </div>
        <div class="chart">
          <!-- rate-box entries… -->
          <div class="rate-box">
            <span class="value">5</span>
            <div class="progress-bar"><span class="progress"></span></div>
            <span class="count">0</span>
          </div>
          <div class="rate-box">
            <span class="value">4</span>
            <div class="progress-bar"><span class="progress"></span></div>
            <span class="count">0</span>
          </div>
          <div class="rate-box">
            <span class="value">3</span>
            <div class="progress-bar"><span class="progress"></span></div>
            <span class="count">0</span>
          </div>
          <div class="rate-box">
            <span class="value">2</span>
            <div class="progress-bar"><span class="progress"></span></div>
            <span class="count">0</span>
          </div>
          <div class="rate-box">
            <span class="value">1</span>
            <div class="progress-bar"><span class="progress"></span></div>
            <span class="count">0</span>
          </div>
        </div>
      </div>

      <!-- Sample User Reviews… (omitted here for brevity) -->

      <!-- App Support Accordion -->
      <section class="accordion">
        <div class="tab">
          <input type="checkbox" name="accordion-1" id="cb1" checked>
          <label for="cb1" class="tab__label section-title">App Support</label>
          <div class="tab__content">
            <div class="appSupportFlex">
              <img src="https://sdkdata.printrash.com/tashra_net_images/website.png" alt="" class="w-22">
              <span class="appsupportHead">Website</span>
            </div>
            <div class="appSupportFlex" style="margin-bottom:5px;">
              <img src="https://sdkdata.printrash.com/tashra_net_images/mail.png" alt="" class="w-22">
              <span class="appsupportHead">Email</span>
            </div>
            <p style="margin-left:42px; margin-bottom:10px;">partner@justbaat.com</p>
            <div class="appSupportFlex" style="margin-bottom:5px;">
              <img src="https://sdkdata.printrash.com/tashra_net_images/location.png" alt="" class="w-22">
              <span class="appsupportHead">Location</span>
            </div>
            <p style="margin-left:42px; margin-bottom:10px;">Haryana</p>
            <div class="appSupportFlex" style="margin-bottom:5px;">
              <img src="https://sdkdata.printrash.com/tashra_net_images/shield.png" alt="" class="w-22">
              <span class="appsupportHead">Privacy Policy</span>
            </div>
          </div>
        </div>
      </section>

      <!-- About the developer -->
      <h2 class="section-title" style="margin-top:30px;">About the developer</h2>
      <div class="review-text" style="margin:5px;">JUSTBAAT MediaTech</div>
      <div class="review-text" style="margin:5px;">partner@justbaat.com</div>
      <div class="review-text" style="margin:5px;">Gurugram</div>
      <div class="review-text" style="margin:5px;">+91 8707886918</div>

      <!-- Bottom Bar -->
      <div class="bottom-bar">
        <div class="bottom-boxes">
          <img src="https://sdkdata.printrash.com/meetis_net_images/games.png" alt="game" class="w-18">
          Games
        </div>
        <div class="bottom-boxes">
          <img src="https://sdkdata.printrash.com/meetis_net_images/apps.png" alt="apps" class="w-55">
          <span style="color:#0B57CF">Apps</span>
        </div>
        <div class="bottom-boxes">
          <img src="https://sdkdata.printrash.com/meetis_net_images/search.png" alt="search" class="w-18">
          Search
        </div>
        <div class="bottom-boxes">
          <img src="https://sdkdata.printrash.com/meetis_net_images/offer.png" alt="offer" class="w-18">
          Offer
        </div>
        <div class="bottom-boxes">
          <img src="https://sdkdata.printrash.com/meetis_net_images/books.png" alt="books" width="14px">
          Books
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 4) SCRIPTS: SWIPER, LUCIDE, INSTALL LOGIC, RATINGS, SCROLL, APP.JS -->
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  // TOGGLE APP vs UNSUPPORTED
  if (document.documentElement.classList.contains('show-app')) {
    document.getElementById('app-content').style.display = 'block';
  } else {
    document.getElementById('unsupported').style.display = 'block';
  }

  // PWA INSTALL LOGIC
  let deferredPrompt;
  const installBtn = document.getElementById('installBtn');
  const installSection = document.getElementById('install');
  const uninstallSection = document.getElementById('uninstall');
  const progress = document.getElementById('progress');

  // Already installed?
  const isInstalled = window.matchMedia('(display-mode: standalone)').matches
          || window.navigator.standalone === true;
  if (isInstalled) {
    installSection.style.display = 'none';
    uninstallSection.style.display = 'block';
  }

  window.addEventListener('beforeinstallprompt', e => {
    e.preventDefault();
    deferredPrompt = e;
    installSection.style.display = 'block';
    progress.textContent = 'Available for install';
  });

  installBtn.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    progress.textContent = outcome === 'accepted'
            ? 'App is installing…'
            : 'Install dismissed';
    deferredPrompt = null;
  });

  window.addEventListener('appinstalled', () => {
    installSection.style.display = 'none';
    uninstallSection.style.display = 'block';
    progress.textContent = 'App successfully installed';
  });

  // Initialize icons & swipers
  lucide.createIcons();
  new Swiper(".mySwiper1", { slidesPerView:3, spaceBetween:30, pagination:{ clickable:true } });
  new Swiper(".mySwiper", {
    slidesPerView:2.5,
    spaceBetween:8,
    pagination:{ clickable:true },
    navigation:{ nextEl:".swiper-button-next", prevEl:".swiper-button-prev" },
    breakpoints:{ 1024:{ slidesPerView:5, spaceBetween:50 } }
  });

  // Ratings logic
  let rateBox = Array.from(document.querySelectorAll(".rate-box"));
  let globalValue = document.querySelector(".global-value");
  let two = document.querySelector(".two");
  let totalReviews = document.querySelector(".total-reviews");
  let reviews = { 5:3500, 4:200, 3:150, 2:50, 1:100 };
  updateValues();

  function updateValues() {
    rateBox.forEach(box => {
      let val = box.querySelector(".value").innerHTML;
      let countBox = box.querySelector(".count");
      let progress = box.querySelector(".progress");
      countBox.innerHTML = nFormat(reviews[val]);
      let pct = Math.round((reviews[val] / getTotal()) * 100);
      progress.style.width = pct + '%';
    });
    totalReviews.innerHTML = getTotal();
    finalRating();
  }
  function getTotal() {
    return Object.values(reviews).reduce((a,b)=>a+b);
  }
  function finalRating() {
    let sum = Object.entries(reviews).reduce((acc,[val,count])=>acc + val*count,0);
    let avg = parseFloat(sum / getTotal()).toFixed(1);
    globalValue.innerHTML = nFormat(avg);
    two.style.background = `linear-gradient(to right, #0B57CF ${(avg/5)*100}% , transparent 0%)`;
  }
  document.querySelectorAll(".value").forEach(el => {
    el.addEventListener("click", () => {
      reviews[el.innerHTML]++;
      updateValues();
    });
  });
  function nFormat(n) {
    if (n>=1e9) return `${(n/1e9).toFixed(1)}b`;
    if (n>=1e6) return `${(n/1e6).toFixed(1)}m`;
    if (n>=1e3) return `${(n/1e3).toFixed(1)}k`;
    return n;
  }

  // Scroll effect
  document.addEventListener("scroll", () => {
    const topBar = document.querySelector(".top-bar-content");
    if (window.scrollY > 3) topBar.classList.add("scrolled");
    else topBar.classList.remove("scrolled");
  });
</script>

<!-- Your external app.js (e.g. additional logic) -->
<script src="app.js"></script>
</body>
</html>
